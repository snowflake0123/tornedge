(this.webpackJsonpTornedge=this.webpackJsonpTornedge||[]).push([[1],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){var a={"./pwa-action-sheet.entry.js":[166,59],"./pwa-camera-modal-instance.entry.js":[167,60],"./pwa-camera-modal.entry.js":[168,61],"./pwa-camera.entry.js":[169,62],"./pwa-toast.entry.js":[170,63]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(a)},o.id=115,e.exports=o},116:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(32),r=n.n(l),c=n(22),i=n(1),s=n(58),m=n(11),u=(n(79),n(5));var d=function(e,t){var n=function(){if("undefined"===typeof window)return t;try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.warn("Error reading localStorage key \u201c".concat(e,"\u201d:"),a),t}},o=Object(a.useState)(n),l=Object(m.a)(o,2),r=l[0],c=l[1];return Object(a.useEffect)((function(){c(n())}),[]),Object(a.useEffect)((function(){var e=function(){c(n())};return window.addEventListener("storage",e),window.addEventListener("local-storage",e),function(){window.removeEventListener("storage",e),window.removeEventListener("local-storage",e)}}),[]),[r,function(t){"undefined"==typeof window&&console.warn("Tried setting localStorage key \u201c".concat(e,"\u201d even though environment is not a client"));try{var n=t instanceof Function?t(r):t;window.localStorage.setItem(e,JSON.stringify(n)),c(n),window.dispatchEvent(new Event("local-storage"))}catch(a){console.warn("Error setting localStorage key \u201c".concat(e,"\u201d:"),a)}}]},f=function(){for(var e,t=new FormData,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];if((e=1===a.length&&"object"===typeof a[0]?a[0]:a).length%2===0)for(var l=0;l<e.length;l+=2)t.set(e[l],e[l+1]);return t},g=n(18),h=n.n(g),E=function(e){var t=o.a.useRef(null),n=d("image_id",null),l=Object(m.a)(n,2),r=l[0],c=l[1],s=Object(a.useState)("No photo chosen"),g=Object(m.a)(s,2),E=g[0],p=g[1];return o.a.createElement(i.q,null,o.a.createElement(i.i,null,o.a.createElement("div",{className:"centered"},o.a.createElement("div",{className:"home-title"},o.a.createElement(i.p,{className:"middle-text"},"Miyata Lab"),o.a.createElement("br",null),o.a.createElement(i.n,{className:"large-text"},"Tornedge")),o.a.createElement(i.k,{icon:u.r,className:"huge-icon ion-margin"}),o.a.createElement(i.c,{size:"large",strong:!0,onClick:function(){t&&t.current&&t.current.click()}},o.a.createElement(i.k,{icon:u.o,className:"ion-margin-end"}),"Choose Photo",o.a.createElement("input",{className:"display-none",type:"file",ref:t,accept:"image/*",onChange:function(t){console.log("[API] upload_image");var n=t.target.files,a="No photo chosen";if(null!==n&&void 0!==n[0]){a=n[0].name;var o=f("cmd","upload_image","image",n[0]);h.a.post("http://localhost:56060",o).then((function(e){c(e.data.data.image_id),console.log("localstorage",r)})).catch((function(e){console.log(e)})),e.history.push("/Functions")}console.log(a),p(a)}})),o.a.createElement(i.n,{className:"ion-margin"},E))))},p=(n(97),function(e){return o.a.createElement(i.q,null,o.a.createElement(i.j,null,o.a.createElement(i.x,null,o.a.createElement(i.d,{slot:"start"},o.a.createElement(i.b,{defaultHref:"/home"})),o.a.createElement(i.v,null,"Functions"))),o.a.createElement(i.i,null,o.a.createElement("div",{className:"centered"},o.a.createElement("div",{className:"functions ion-align-items-center ion-justify-content-center"},o.a.createElement(i.e,{className:"ion-text-center",onClick:function(){return e.history.push("/fileTop")}},o.a.createElement(i.g,null,o.a.createElement(i.h,null,"File")),o.a.createElement(i.k,{icon:u.m,size:"large"}),o.a.createElement(i.f,null,"File transfer",o.a.createElement("br",null)," by using a piece of paper.")),o.a.createElement(i.e,{className:"ion-text-center",onClick:function(){return e.history.push("/chatTop")}},o.a.createElement(i.g,null,o.a.createElement(i.h,null,"Chat")),o.a.createElement(i.k,{icon:u.d,size:"large"}),o.a.createElement(i.f,null,"Chat",o.a.createElement("br",null)," by using a piece of paper."))))))}),y=(n(98),function(e){return o.a.createElement(i.q,null,o.a.createElement(i.j,null,o.a.createElement(i.x,null,o.a.createElement(i.d,{slot:"start"},o.a.createElement(i.b,{defaultHref:"/functions"})),o.a.createElement(i.v,null,"File"))),o.a.createElement(i.i,null,o.a.createElement("div",{className:"centered"},o.a.createElement("div",{className:"roles"},o.a.createElement(i.e,{className:"role ion-text-center",onClick:function(){return e.history.push("/fileSend")}},o.a.createElement(i.g,null,o.a.createElement(i.h,{className:"ion-text-nowrap"},"Send")),o.a.createElement(i.k,{icon:u.l,className:"larger-icon"}),o.a.createElement(i.f,null)),o.a.createElement(i.e,{className:"role ion-text-center",onClick:function(){return e.history.push("/fileReceive")}},o.a.createElement(i.g,null,o.a.createElement(i.h,{className:"ion-text-nowrap"},"Receive")),o.a.createElement(i.k,{icon:u.k,className:"larger-icon"}),o.a.createElement(i.f,null))))))}),_=(n(99),function(e){var t=Object(a.useState)(!1),n=Object(m.a)(t,2),l=n[0],r=n[1],c=Object(a.useState)(""),s=Object(m.a)(c,2),d=s[0],g=s[1];o.a.useRef(null);return o.a.createElement(i.q,null,o.a.createElement(i.j,null,o.a.createElement(i.x,null,o.a.createElement(i.d,{slot:"start"},o.a.createElement(i.b,{defaultHref:"/functions"})),o.a.createElement(i.v,null,"Chat"))),o.a.createElement(i.i,null,o.a.createElement("div",{className:"centered"},o.a.createElement("div",{className:"functions"},o.a.createElement(i.e,{className:"ion-text-center",onClick:function(){return function(){if(console.log("[API] create_chat_room"),null!==localStorage.getItem("image_id")){var t=f("cmd","create_chat_room","image_id",localStorage.getItem("image_id"));h.a.post("http://localhost:56060",t).then((function(e){var t=e.data;console.log(e),"success"===t.result?(localStorage.chat_room_id=t.chat_room_id,console.log("chat_room_id",localStorage.getItem("chat_room_id"))):(console.log("e"),g(t.message),r(!0))})).catch((function(e){console.log(e)}))}e.history.push("/chatRoom")}()}},o.a.createElement(i.g,null,o.a.createElement(i.h,null,"Create Room")),o.a.createElement(i.f,null,o.a.createElement(i.k,{icon:u.a,className:"larger-icon"}))),o.a.createElement(i.e,{className:"ion-text-center",onClick:function(){return function(){console.log("[API] enter_chat_room");var t=f("cmd","chat_room_id","image_id",localStorage.getItem("image_id"));h.a.post("http://localhost:56060",t).then((function(e){var t=e.data.data;"success"===t.result?(localStorage.chat_room_id=t.chat_room_id,console.log("chat_room_id",localStorage.getItem("chat_room_id"))):(g(t.message),r(!0))})),e.history.push("/chatRoom")}()}},o.a.createElement(i.g,null,o.a.createElement(i.h,null,"Enter Room")),o.a.createElement(i.f,null,o.a.createElement(i.k,{icon:u.n,className:"larger-icon"}))))),o.a.createElement(i.w,{isOpen:l,onDidDismiss:function(){return r(!1)},message:d,duration:200})))});n(100);function v(e){console.log("Begin async operation"),setTimeout((function(){console.log("Async operation has ended"),e.detail.complete()}),1e3)}var j=[{image_id:"1",text:"Hi, we met earlier. I'm Bob."},{image_id:"2",text:"Hey Bob. I'm Kenny."},{image_id:"1",text:"I'd like to continue what we were talking about earlier, if that's okay."},{image_id:"2",text:"Of course."},{image_id:"2",text:"Oh, I'm sorry. I've got some business to attend to later, so can I have ten minutes with you?"},{image_id:"1",text:"Okay! Then let's talk briefly."}],b=function(e){return o.a.createElement(i.m,{lines:"none"},o.a.createElement(i.n,{className:"ion-margin-start me-speech-bubble ion-padding ion-text-wrap"},e.text))},w=function(e){return o.a.createElement(i.m,{lines:"none"},o.a.createElement(i.n,{className:"ion-margin-end partner-speech-bubble ion-padding ion-text-wrap"},e.text))},k=function(e){return 0===e.messages.length?null:o.a.createElement(i.o,{className:"ion-padding-top"},e.messages.map((function(e,t){return e.image_id===localStorage.getItem("image_id")?o.a.createElement(b,{key:t,image_id:e.image_id,text:e.text}):o.a.createElement(w,{key:t,image_id:e.image_id,text:e.text})})))},N=function(e){var t=Object(a.useState)(j),n=Object(m.a)(t,2),l=n[0],r=n[1],c=Object(a.useState)(""),s=Object(m.a)(c,2),d=s[0],g=s[1],E=Object(a.useState)(!1),p=Object(m.a)(E,2),y=p[0],_=p[1],b=Object(a.useState)(""),w=Object(m.a)(b,2),N=w[0],O=w[1],x=function(){console.log("[API] update_chat");var e=f("cmd","update_chat","chat_room_id",localStorage.getItem("chat_room_id"));h.a.post("http://localhost:56060",e).then((function(e){var t=e.data.data;"success"==t.result?r(t.chat_log):(O(t.message),_(!0))})).catch((function(e){console.log(e)}))};return Object(i.G)((function(){return x()})),o.a.createElement(i.q,null,o.a.createElement(i.j,null,o.a.createElement(i.x,null,o.a.createElement(i.d,{slot:"start"},o.a.createElement(i.c,{fill:"clear",size:"small",onClick:function(){return function(){console.log("[API] exit_chat");var t=f("cmd","exit_chat","image_id","1");h.a.post("http://localhost:56060",t).then((function(e){var t=e.data.data;"success"==t.result?r([]):(O(t.message),_(!0))})).catch((function(e){console.log(e)})),e.history.goBack()}()}},"Back")),o.a.createElement(i.v,null,"Chat -Chat Room-"),o.a.createElement(i.c,{slot:"end",color:"midium",size:"small",onClick:function(){return x()}},o.a.createElement(i.k,{icon:u.s})))),o.a.createElement(i.i,null,o.a.createElement(i.r,{slot:"fixed",onIonRefresh:v},o.a.createElement(i.s,{pullingIcon:u.f,pullingText:"Pull to refresh",refreshingSpinner:"circles",refreshingText:"Refreshing..."})),o.a.createElement(k,{messages:l})),o.a.createElement(i.m,null,o.a.createElement(i.l,{className:"ion-margin-start",color:"Midium",placeholder:"Message",value:d,onIonChange:function(e){return g(e.detail.value)},required:!0})),o.a.createElement("div",{className:"ion-padding"},o.a.createElement(i.c,{color:"success",expand:"block",onClick:function(){return function(){console.log("[API] send_chat");var e=f("cmd","send_chat","message",d,"chat_room_id",localStorage.getItem("chat_room_id"));h.a.post("http://localhost:56060",e).then((function(e){var t=e.data.data;"success"===t.result?r(t.chat_log):(O(t.message),_(!0))})),g("")}()}},"Send")),o.a.createElement(i.w,{isOpen:y,onDidDismiss:function(){return _(!1)},message:N,duration:200}))},O=(n(101),function(){var e=o.a.useRef(null),t=Object(a.useState)(null),n=Object(m.a)(t,2),l=n[0],r=n[1],c=Object(a.useState)("No File chosen"),s=Object(m.a)(c,2),d=s[0],g=s[1];return o.a.createElement(i.q,null,o.a.createElement(i.j,null,o.a.createElement(i.x,null,o.a.createElement(i.d,{slot:"start"},o.a.createElement(i.b,{defaultHref:"/FileTop"})),o.a.createElement(i.v,null,"File -Send-"))),o.a.createElement(i.i,null,o.a.createElement(i.e,null,o.a.createElement(i.g,null,o.a.createElement(i.h,null,"File")),o.a.createElement(i.f,null,o.a.createElement(i.c,{size:"large",strong:!0,onClick:function(){e&&e.current&&e.current.click()}},o.a.createElement(i.k,{icon:u.m,className:"ion-margin-end"}),"Choose File",o.a.createElement("input",{name:"file",className:"display-none",type:"file",onChange:function(e){var t=e.target.files,n="No File chosen";null!==t&&void 0!==t[0]&&(n=t[0].name,r(t[0])),g(n)},ref:e})),o.a.createElement("br",null),o.a.createElement(i.n,{className:"ion-margin"},d))),o.a.createElement("div",{className:"footer-button"},o.a.createElement(i.c,{expand:"full",size:"large",className:"ion-align-self-end",onClick:function(e){var t=localStorage.getItem("image_id"),n=f("cmd","upload_file","image_id",t,"file",l);h.a.post("http://localhost:56060",n).then((function(e){console.log("body:",e.data)})).catch((function(e){console.log(e)}))}},"Send"))))}),x=(n(102),function(){var e=n(103),t=Object(a.useState)(!1),l=Object(m.a)(t,2),r=l[0],c=l[1],s=Object(a.useState)(""),d=Object(m.a)(s,2),g=d[0],E=d[1],p=Object(a.useState)(""),y=Object(m.a)(p,2),_=y[0],v=y[1];return o.a.createElement(i.q,null,o.a.createElement(i.j,null,o.a.createElement(i.x,null,o.a.createElement(i.d,{slot:"start"},o.a.createElement(i.b,{defaultHref:"/FileTop"})),o.a.createElement(i.v,null,"File -Receive-"))),o.a.createElement(i.i,null,o.a.createElement("div",{className:"centered-card"},o.a.createElement(i.e,null,o.a.createElement(i.g,null,o.a.createElement(i.h,null,"Received File")),o.a.createElement(i.f,null,o.a.createElement("div",{style:{display:r?"none":""}},"No file received"),o.a.createElement("div",{style:{display:r?"":"none"}},o.a.createElement(i.k,{icon:u.m}),o.a.createElement("a",{href:g},_))))),o.a.createElement("div",{className:"footer-button"},o.a.createElement(i.c,{expand:"full",size:"large",className:"ion-align-self-end",onClick:function(t){var n=localStorage.getItem("image_id"),a=f("cmd","download_file","image_id",n);h.a.post("http://localhost:56060",a).then((function(t){console.log("body:",t.data);var n=t.data.data.file_path;E(n),v(e.basename(n)),c(!0)})).catch((function(e){console.log(e)}))}},"Receive"))))}),S=(n(104),n(105),n(106),n(107),n(108),n(109),n(110),n(111),n(112),n(113),n(114),function(){return o.a.createElement(i.a,null,o.a.createElement(s.a,null,o.a.createElement(i.u,null,o.a.createElement(c.b,{path:"/home",component:E}),o.a.createElement(c.b,{path:"/functions",component:p}),o.a.createElement(c.b,{path:"/fileTop",component:y}),o.a.createElement(c.b,{path:"/ChatTop",component:_}),o.a.createElement(c.b,{path:"/ChatRoom",component:N}),o.a.createElement(c.b,{path:"/FileSend",component:O}),o.a.createElement(c.b,{path:"/FileReceive",component:x}),o.a.createElement(c.a,{exact:!0,from:"/",to:"/home"}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=n(62);r.a.render(o.a.createElement(S,null),document.getElementById("root")),Object(C.a)(window),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},66:function(e,t,n){e.exports=n(116)},72:function(e,t,n){var a={"./ion-action-sheet.entry.js":[118,7],"./ion-alert.entry.js":[119,8],"./ion-app_8.entry.js":[120,9],"./ion-avatar_3.entry.js":[121,19],"./ion-back-button.entry.js":[122,20],"./ion-backdrop.entry.js":[123,45],"./ion-button_2.entry.js":[124,21],"./ion-card_5.entry.js":[125,22],"./ion-checkbox.entry.js":[126,23],"./ion-chip.entry.js":[127,24],"./ion-col_3.entry.js":[128,46],"./ion-datetime_3.entry.js":[129,12],"./ion-fab_3.entry.js":[130,25],"./ion-img.entry.js":[131,47],"./ion-infinite-scroll_2.entry.js":[132,48],"./ion-input.entry.js":[133,26],"./ion-item-option_3.entry.js":[134,27],"./ion-item_8.entry.js":[135,28],"./ion-loading.entry.js":[136,29],"./ion-menu_3.entry.js":[137,30],"./ion-modal.entry.js":[138,10],"./ion-nav_2.entry.js":[139,16],"./ion-popover.entry.js":[140,11],"./ion-progress-bar.entry.js":[141,31],"./ion-radio_2.entry.js":[142,32],"./ion-range.entry.js":[143,33],"./ion-refresher_2.entry.js":[144,13],"./ion-reorder_2.entry.js":[145,18],"./ion-ripple-effect.entry.js":[146,49],"./ion-route_4.entry.js":[147,34],"./ion-searchbar.entry.js":[148,35],"./ion-segment_2.entry.js":[149,36],"./ion-select_3.entry.js":[150,37],"./ion-slide_2.entry.js":[151,50],"./ion-spinner.entry.js":[152,15],"./ion-split-pane.entry.js":[153,51],"./ion-tab-bar_2.entry.js":[154,38],"./ion-tab_2.entry.js":[155,17],"./ion-text.entry.js":[156,39],"./ion-textarea.entry.js":[157,40],"./ion-toast.entry.js":[158,41],"./ion-toggle.entry.js":[159,14],"./ion-virtual-scroll.entry.js":[160,52]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(a)},o.id=72,e.exports=o},74:function(e,t,n){var a={"./ion-icon.entry.js":[162,67]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(a)},o.id=74,e.exports=o},79:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[66,3,6]]]);
//# sourceMappingURL=main.ff6047c4.chunk.js.map